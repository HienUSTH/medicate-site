<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tr·∫°ng th√°i m√¥i tr∆∞·ªùng ‚Ä¢ Medicate</title>
  <meta name="description" content="Tr·∫°ng th√°i nhi·ªát ƒë·ªô & ƒë·ªô ·∫©m t·ªß thu·ªëc Medicate, ƒë·ªçc t·ª´ c·∫£m bi·∫øn DHT22 qua Google Sheets." />
  <!-- FAVICONS (gi·ªëng index) -->
  <link rel="icon" href="assets/img/favicon.png">
  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Google Fonts: Nunito Sans (Semibold 600) -->
  <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@600;700;800&display=swap" rel="stylesheet">
  <style>
    .font-nunito{font-family:"Nunito Sans",ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial,"Noto Sans","Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji"}
  </style>
</head>
<body class="bg-slate-50 text-slate-800">
  <!-- HEADER (copy t·ª´ index.html) -->
  <header class="sticky top-0 z-50 bg-white/90 backdrop-blur border-b border-slate-200">
    <div class="max-w-screen-xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between h-16">
        <a href="index.html" class="flex items-center gap-2 font-semibold">
          <img src="assets/img/favicon.png" alt="Medicate" class="h-10 w-10" />
          <span class="text-lg">Medicate</span>
        </a>

        <nav class="hidden md:flex items-center gap-6">
          <a href="index.html" class="py-2 hover:text-sky-700">Trang ch·ªß</a>

          <div class="relative" data-dd="devices">
            <button class="py-2 hover:text-sky-700 flex items-center gap-1 dd-toggle">
              Thi·∫øt b·ªã
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m19 9-7 7-7-7" />
              </svg>
            </button>
            <div class="dd-menu absolute left-0 mt-3 hidden">
              <div class="w-64 rounded-2xl border bg-white shadow-xl p-2">
                <a href="thietbi.html" class="block px-3 py-2 rounded-lg hover:bg-slate-100">T·∫•t c·∫£</a>
                <a href="thietbi.html?cat=cam-bien" class="block px-3 py-2 rounded-lg hover:bg-slate-100">C·∫£m bi·∫øn</a>
                <a href="thietbi.html?cat=vi-dieu-khien" class="block px-3 py-2 rounded-lg hover:bg-slate-100">Vi ƒëi·ªÅu khi·ªÉn</a>
                <a href="thietbi.html?cat=man-hinh" class="block px-3 py-2 rounded-lg hover:bg-slate-100">M√†n h√¨nh hi·ªÉn th·ªã</a>
                <a href="thietbi.html?cat=nguon-pin" class="block px-3 py-2 rounded-lg hover:bg-slate-100">Ngu·ªìn / Pin / S·∫°c</a>
                <a href="thietbi.html?cat=giam-ap" class="block px-3 py-2 rounded-lg hover:bg-slate-100">Module gi·∫£m √°p</a>
                <a href="thietbi.html?cat=phu-kien" class="block px-3 py-2 rounded-lg hover:bg-slate-100">Ph·ª• ki·ªán</a>
              </div>
            </div>
          </div>

          <a href="kho.html" class="py-2 hover:text-sky-700">Kho thu·ªëc</a>

          <div class="relative" data-dd="status">
            <button class="py-2 hover:text-sky-700 flex items-center gap-1 dd-toggle">
              Tr·∫°ng th√°i
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m19 9-7 7-7-7" />
              </svg>
            </button>
            <div class="dd-menu absolute left-0 mt-3 hidden">
              <div class="w-56 rounded-2xl border bg-white shadow-xl p-2">
                <a href="trangthai.html?view=now" class="block px-3 py-2 rounded-lg hover:bg-slate-100">Hi·ªán gi·ªù</a>
                <a href="trangthai.html?view=history" class="block px-3 py-2 rounded-lg hover:bg-slate-100">L·ªãch s·ª≠</a>
              </div>
            </div>
          </div>

          <a href="mini-dashboard.html" class="py-2 hover:text-sky-700">Mini dashboard</a>

          <div class="relative" data-dd="user">
            <button class="py-2 hover:text-sky-700 flex items-center gap-1 dd-toggle">
              Ng∆∞·ªùi d√πng
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m19 9-7 7-7-7" />
              </svg>
            </button>
            <div class="dd-menu absolute right-0 mt-3 hidden">
              <div class="w-56 rounded-2xl border bg-white shadow-xl p-2">
                <a href="user.html?tab=signup" class="block px-3 py-2 rounded-lg hover:bg-slate-100">ƒêƒÉng k√Ω</a>
                <a href="user.html?tab=signin" class="block px-3 py-2 rounded-lg hover:bg-slate-100">ƒêƒÉng nh·∫≠p</a>
              </div>
            </div>
          </div>
        </nav>

        <button id="btnMobile" class="md:hidden p-2 rounded-lg border border-slate-300" aria-label="M·ªü menu">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
          </svg>
        </button>
      </div>
    </div>

    <!-- Mobile menu -->
    <div id="mobileMenu" class="md:hidden hidden border-t border-slate-200 bg-white">
      <div class="max-w-screen-xl mx-auto px-4 py-3 space-y-1">
        <a href="index.html" class="block px-3 py-2 rounded-lg hover:bg-slate-100">Trang ch·ªß</a>
        <details class="px-3 py-2 rounded-lg">
          <summary class="cursor-pointer select-none">Thi·∫øt b·ªã</summary>
          <div class="mt-2 pl-3 space-y-1">
            <a href="thietbi.html" class="block py-1">‚Ä¢ T·∫•t c·∫£</a>
            <a href="thietbi.html?cat=cam-bien" class="block py-1">‚Ä¢ C·∫£m bi·∫øn</a>
            <a href="thietbi.html?cat=vi-dieu-khien" class="block py-1">‚Ä¢ Vi ƒëi·ªÅu khi·ªÉn</a>
            <a href="thietbi.html?cat=man-hinh" class="block py-1">‚Ä¢ M√†n h√¨nh hi·ªÉn th·ªã</a>
            <a href="thietbi.html?cat=nguon-pin" class="block py-1">‚Ä¢ Ngu·ªìn / Pin / S·∫°c</a>
            <a href="thietbi.html?cat=giam-ap" class="block py-1">‚Ä¢ Module gi·∫£m √°p</a>
            <a href="thietbi.html?cat=phu-kien" class="block py-1">‚Ä¢ Ph·ª• ki·ªán</a>
          </div>
        </details>
        <a href="kho.html" class="block px-3 py-2 rounded-lg hover:bg-slate-100">Kho thu·ªëc</a>
        <details class="px-3 py-2 rounded-lg">
          <summary class="cursor-pointer select-none">Tr·∫°ng th√°i</summary>
          <div class="mt-2 pl-3 space-y-1">
            <a href="trangthai.html?view=now" class="block py-1">‚Ä¢ Hi·ªán gi·ªù</a>
            <a href="trangthai.html?view=history" class="block py-1">‚Ä¢ L·ªãch s·ª≠</a>
          </div>
        </details>
        <a href="mini-dashboard.html" class="block px-3 py-2 rounded-lg hover:bg-slate-100">Mini dashboard</a>
        <details class="px-3 py-2 rounded-lg">
          <summary class="cursor-pointer select-none">Ng∆∞·ªùi d√πng</summary>
          <div class="mt-2 pl-3 space-y-1">
            <a href="user.html?tab=signup" class="block py-1">‚Ä¢ ƒêƒÉng k√Ω</a>
            <a href="user.html?tab=signin" class="block py-1">‚Ä¢ ƒêƒÉng nh·∫≠p</a>
          </div>
        </details>
      </div>
    </div>
  </header>

  <!-- MAIN -->
  <main class="max-w-screen-xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-8">
    <header class="flex flex-col gap-2 md:flex-row md:items-end md:justify-between">
      <div>
        <h1 class="text-2xl md:text-3xl font-semibold tracking-tight">Tr·∫°ng th√°i m√¥i tr∆∞·ªùng t·ªß thu·ªëc</h1>
        <p class="text-sm text-slate-500">
          D·ªØ li·ªáu ƒë∆∞·ª£c ghi t·ª´ ESP32 + DHT22 v√†o Google Sheets, sau ƒë√≥ hi·ªÉn th·ªã l·∫°i tr√™n web.
        </p>
      </div>

      <!-- Tabs now/history -->
      <div class="inline-flex rounded-full border border-slate-200 bg-slate-100 p-1 text-sm">
        <a href="trangthai.html?view=now"
           data-view-tab="now"
           class="px-3 py-1.5 rounded-full border border-transparent">
          Hi·ªán gi·ªù
        </a>
        <a href="trangthai.html?view=history"
           data-view-tab="history"
           class="px-3 py-1.5 rounded-full border border-transparent">
          L·ªãch s·ª≠
        </a>
      </div>
    </header>

    <!-- th√¥ng b√°o l·ªói -->
    <div id="statusError" class="hidden rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700">
      Kh√¥ng ƒë·ªçc ƒë∆∞·ª£c d·ªØ li·ªáu t·ª´ Google Sheets. Ki·ªÉm tra l·∫°i quy·ªÅn chia s·∫ª ho·∫∑c k·∫øt n·ªëi m·∫°ng.
    </div>

    <!-- view: HI·ªÜN GI·ªú -->
    <section id="statusNow" class="space-y-6">
      <!-- card t·ªïng -->
      <div class="rounded-2xl border bg-white shadow-sm p-5 flex flex-col md:flex-row md:items-center md:justify-between gap-4">
        <div>
          <div class="flex items-center gap-2 mb-1">
            <span class="text-sm font-medium text-slate-500">Tr·∫°ng th√°i hi·ªán t·∫°i</span>
            <span id="nowOverallBadge"
                  class="inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-medium">
              ƒêang t·∫£i...
            </span>
          </div>
          <p class="text-sm text-slate-500">
            C·∫≠p nh·∫≠t l·∫ßn cu·ªëi: <span id="nowTimestamp" class="font-medium text-slate-700">‚Äî</span>
          </p>
        </div>

        <div class="grid grid-cols-2 gap-4 md:w-1/2">
          <div class="rounded-xl border border-slate-200 bg-sky-50 px-4 py-3">
            <div class="text-xs font-medium text-slate-500 uppercase tracking-wide">Nhi·ªát ƒë·ªô</div>
            <div id="nowTemp" class="mt-1 text-xl font-semibold tracking-tight">‚Äî</div>
            <div id="nowTempBand" class="mt-0.5 text-xs text-slate-500">‚Äî</div>
          </div>
          <div class="rounded-xl border border-slate-200 bg-emerald-50 px-4 py-3">
            <div class="text-xs font-medium text-slate-500 uppercase tracking-wide">ƒê·ªô ·∫©m</div>
            <div id="nowHum" class="mt-1 text-xl font-semibold tracking-tight">‚Äî</div>
            <div id="nowHumBand" class="mt-0.5 text-xs text-slate-500">‚Äî</div>
          </div>
        </div>
      </div>

      <!-- b·∫£ng 20 ƒëi·ªÉm g·∫ßn nh·∫•t v·ªõi filter -->
      <div class="rounded-2xl border bg-white shadow-sm">
        <div class="px-5 py-4 border-b space-y-3">
          <div class="flex items-center justify-between gap-2">
            <div>
              <h2 class="text-sm font-semibold tracking-tight">20 ƒëi·ªÉm g·∫ßn nh·∫•t trong ng√†y</h2>
              <p class="text-xs text-slate-500">L·ªçc theo ng√†y m·ªõi nh·∫•t c√≥ d·ªØ li·ªáu trong Sheet1.</p>
            </div>
          </div>
          <div class="flex flex-wrap gap-2 text-xs">
            <select id="nowTempBandSelect"
                    class="rounded-full border border-slate-200 bg-slate-50 px-3 py-1.5 focus:outline-none focus:ring-1 focus:ring-sky-500">
              <option value="">Band nhi·ªát: t·∫•t c·∫£</option>
              <option value="cold">‚ùÑÔ∏è <15¬∞ (l·∫°nh)</option>
              <option value="ok">‚úÖ 15‚Äì29.9¬∞ (·ªïn)</option>
              <option value="warn">‚ö†Ô∏è 30‚Äì34.9¬∞ (c·∫£nh b√°o)</option>
              <option value="hot">üî• ‚â•35¬∞ (n√≥ng)</option>
            </select>
            <select id="nowHumBandSelect"
                    class="rounded-full border border-slate-200 bg-slate-50 px-3 py-1.5 focus:outline-none focus:ring-1 focus:ring-sky-500">
              <option value="">Band ·∫©m: t·∫•t c·∫£</option>
              <option value="ok">‚úÖ ‚â§60% (·ªïn)</option>
              <option value="warn">‚ö†Ô∏è 60‚Äì69.9% (c·∫£nh b√°o)</option>
              <option value="wet">üíß ‚â•70% (qu√° ·∫©m)</option>
            </select>
            <input id="nowSearch"
                   type="text"
                   class="w-full md:w-72 rounded-full border border-slate-200 bg-slate-50 px-3 py-1.5 focus:outline-none focus:ring-1 focus:ring-sky-500"
                   placeholder="T√¨m theo th·ªùi gian / nhi·ªát ƒë·ªô / ƒë·ªô ·∫©m...">
          </div>
        </div>

        <div class="overflow-x-auto">
          <table class="min-w-full text-sm">
            <thead class="bg-slate-50 border-b">
              <tr>
                <th class="px-4 py-2 text-left font-medium text-slate-500">Th·ªùi gian</th>
                <th class="px-4 py-2 text-right font-medium text-slate-500">Nhi·ªát ƒë·ªô (¬∞C)</th>
                <th class="px-4 py-2 text-left font-medium text-slate-500">Band nhi·ªát</th>
                <th class="px-4 py-2 text-right font-medium text-slate-500">ƒê·ªô ·∫©m (%)</th>
                <th class="px-4 py-2 text-left font-medium text-slate-500">Band ·∫©m</th>
              </tr>
            </thead>
            <tbody id="nowTableBody" class="divide-y divide-slate-100">
              <tr><td colspan="5" class="px-4 py-4 text-center text-slate-400">ƒêang t·∫£i...</td></tr>
            </tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- view: L·ªäCH S·ª¨ (h√¥m qua + tr∆∞·ªõc ƒë√≥) -->
    <section id="statusHistory" class="space-y-6 hidden">
      <div class="rounded-2xl border bg-white shadow-sm">
        <div class="px-5 py-4 border-b space-y-3">
          <div class="flex flex-col gap-2 md:flex-row md:items-center md:justify-between">
            <div>
              <h2 class="text-sm font-semibold tracking-tight">L·ªãch s·ª≠ tr∆∞·ªõc h√¥m nay</h2>
              <p id="historySummary" class="text-xs text-slate-500">
                ƒêang t·∫£i d·ªØ li·ªáu t·ª´ Google Sheets...
              </p>
            </div>
            <div class="flex flex-wrap gap-2 text-xs">
              <!-- ch·ªçn ng√†y -->
              <select id="historyDateSelect"
                      class="rounded-full border border-slate-200 bg-slate-50 px-3 py-1.5 focus:outline-none focus:ring-1 focus:ring-sky-500">
                <option value="all">T·∫•t c·∫£ ng√†y tr∆∞·ªõc h√¥m nay</option>
              </select>
              <!-- filter band nhi·ªát -->
              <select id="historyTempBandSelect"
                      class="rounded-full border border-slate-200 bg-slate-50 px-3 py-1.5 focus:outline-none focus:ring-1 focus:ring-sky-500">
                <option value="">Band nhi·ªát: t·∫•t c·∫£</option>
                <option value="cold">‚ùÑÔ∏è <15¬∞ (l·∫°nh)</option>
                <option value="ok">‚úÖ 15‚Äì29.9¬∞ (·ªïn)</option>
                <option value="warn">‚ö†Ô∏è 30‚Äì34.9¬∞ (c·∫£nh b√°o)</option>
                <option value="hot">üî• ‚â•35¬∞ (n√≥ng)</option>
              </select>
              <!-- filter band ·∫©m -->
              <select id="historyHumBandSelect"
                      class="rounded-full border border-slate-200 bg-slate-50 px-3 py-1.5 focus:outline-none focus:ring-1 focus:ring-sky-500">
                <option value="">Band ·∫©m: t·∫•t c·∫£</option>
                <option value="ok">‚úÖ ‚â§60% (·ªïn)</option>
                <option value="warn">‚ö†Ô∏è 60‚Äì69.9% (c·∫£nh b√°o)</option>
                <option value="wet">üíß ‚â•70% (qu√° ·∫©m)</option>
              </select>
            </div>
          </div>

          <!-- √¥ t√¨m ki·∫øm -->
          <div class="flex flex-wrap gap-2 text-xs">
            <input id="historySearch"
                   type="text"
                   class="w-full md:w-80 rounded-full border border-slate-200 bg-slate-50 px-3 py-1.5 focus:outline-none focus:ring-1 focus:ring-sky-500"
                   placeholder="T√¨m theo th·ªùi gian (2025-11-19), nhi·ªát ƒë·ªô 25.0, ƒë·ªô ·∫©m 60.0...">
          </div>
        </div>

        <div class="overflow-x-auto">
          <table class="min-w-full text-sm">
            <thead class="bg-slate-50 border-b">
              <tr>
                <th class="px-4 py-2 text-left font-medium text-slate-500">Th·ªùi gian</th>
                <th class="px-4 py-2 text-right font-medium text-slate-500">Nhi·ªát ƒë·ªô (¬∞C)</th>
                <th class="px-4 py-2 text-left font-medium text-slate-500">Band nhi·ªát</th>
                <th class="px-4 py-2 text-right font-medium text-slate-500">ƒê·ªô ·∫©m (%)</th>
                <th class="px-4 py-2 text-left font-medium text-slate-500">Band ·∫©m</th>
              </tr>
            </thead>
            <tbody id="historyTableBody" class="divide-y divide-slate-100">
              <tr><td colspan="5" class="px-4 py-4 text-center text-slate-400">ƒêang t·∫£i...</td></tr>
            </tbody>
          </table>
        </div>
      </div>
    </section>
  </main>

  <!-- FOOTER (copy t·ª´ index.html) -->
  <footer class="mt-16 border-t border-slate-200 bg-white">
    <div class="max-w-screen-xl mx-auto px-4 sm:px-6 lg:px-8 py-10">
      <div class="grid md:grid-cols-4 gap-8">
        <div>
          <div class="flex items-center gap-2 font-semibold">
            <img src="assets/img/favicon.png" alt="Medicate" class="h-10 w-10"/>
            <span>Medicate</span>
          </div>
          <p class="text-sm mt-3 text-slate-600">T·ªß thu·ªëc th√¥ng minh: c·∫£m bi·∫øn nhi·ªát/·∫©m, qu·∫£n l√Ω theo l√¥, AI t∆∞ v·∫•n.</p>
        </div>
        <div>
          <div class="font-medium mb-2">Li√™n k·∫øt</div>
          <ul class="space-y-1 text-sm">
            <li><a class="hover:text-sky-700" href="kho.html">Kho thu·ªëc</a></li>
            <li><a class="hover:text-sky-700" href="trangthai.html?view=now">Tr·∫°ng th√°i ‚Äì Hi·ªán gi·ªù</a></li>
            <li><a class="hover:text-sky-700" href="trangthai.html?view=history">Tr·∫°ng th√°i ‚Äì L·ªãch s·ª≠</a></li>
            <li><a class="hover:text-sky-700" href="mini-dashboard.html">Mini dashboard</a></li>
          </ul>
        </div>
        <div>
          <div class="font-medium mb-2">T√†i li·ªáu</div>
          <ul class="space-y-1 text-sm">
            <li><a class="hover:text-sky-700" href="#">H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng</a></li>
            <li><a class="hover:text-sky-700" href="#">Ngu·ªìn & Credits</a></li>
          </ul>
        </div>
        <div>
          <div class="font-medium mb-2">Li√™n h·ªá</div>
          <ul class="space-y-1 text-sm">
            <li>Email: <a class="hover:text-sky-700" href="mailto:contact@medicate.com.vn">contact@medicate.com.vn</a></li>
          </ul>
        </div>
      </div>
      <p class="mt-8 text-xs text-slate-500">‚ö†Ô∏è Th√¥ng tin d∆∞·ª£c ch·ªâ mang t√≠nh tham kh·∫£o ‚Äî h√£y h·ªèi √Ω ki·∫øn b√°c sƒ©/DS khi c·∫ßn.</p>
    </div>
  </footer>

  <!-- JS -->
  <script src="assets/js/nav.js"></script>
  <script src="assets/js/status-watcher.js"></script>
  <script src="assets/js/reminder-watcher.js"></script>
  <script src="assets/js/trangthai.js"></script>
</body>
</html>
